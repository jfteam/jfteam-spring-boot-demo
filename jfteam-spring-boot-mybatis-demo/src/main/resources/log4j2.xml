<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN" monitorInterval="1800">
    <properties>
        <property name="APP_NAME">mybatis-demo</property>
        <property name="LOG_HOME">/Users/fengwenping/IdeaProjects/applogs/${APP_NAME}/logs</property>
        <property name="BACKUP_HOME">${LOG_HOME}/backup</property>
        <property name="LOG_PATTERN">%d{yyyy-MM-dd HH:mm:ss.SSS} %level [%thread][%file:%line] - %msg%n</property>
    </properties>

    <Appenders>
        <!-- 定义控制台输出 -->
        <Console name="CONSOLE" target="SYSTEM_OUT" follow="true">
            <PatternLayout pattern="${LOG_PATTERN}"/>
        </Console>
        <!-- info -->
        <RollingRandomAccessFile name="INFO_LOG" append="true" fileName="${LOG_HOME}/info.log" filePattern="${BACKUP_HOME}/info-%d{yyyyMMddHH}.log">
            <PatternLayout pattern="${LOG_PATTERN}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <!--表示压缩包最多保留30个-->
            <DefaultRolloverStrategy max="30"/>
        </RollingRandomAccessFile>
        <!-- error -->
        <RollingRandomAccessFile name="ERROR_LOG" append="true" fileName="${LOG_HOME}/error.log" filePattern="${BACKUP_HOME}/error-%d{yyyyMMddHH}.log">
            <!--控制台只输出level及以上级别的信息（onMatch），其他的直接拒绝（onMismatch）-->
            <ThresholdFilter level="error" onMatch="ACCEPT" onMismatch="DENY"/>
            <PatternLayout pattern="${LOG_PATTERN}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
        </RollingRandomAccessFile>
    </Appenders>
    <Loggers>
        <!--log4jdbc start-->
        <Logger name="jdbc.sqlonly" level="error" additivity="true"></Logger>
        <Logger name="jdbc.audit" level="error" additivity="true"></Logger>
        <Logger name="jdbc.resultset" level="error" additivity="true"></Logger>
        <Logger name="jdbc.resultsettable" level="error" additivity="true"></Logger>
        <Logger name="jdbc.connection" level="error" additivity="true"></Logger>
        <Logger name="jdbc.sqltiming" level="info" additivity="true"></Logger>
        <!--log4jdbc end-->
        <Root level="info">
            <!--<AppenderRef ref="CONSOLE"/>-->
            <AppenderRef ref="INFO_LOG"/>
            <AppenderRef ref="ERROR_LOG"/>
        </Root>
    </Loggers>
</Configuration>